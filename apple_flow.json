{
  "nodes": [
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Extract JSON from the AI output\nconst string_json = $json.output || '';\nconst json_match = String(string_json).match(/```json\\s*([\\s\\S]*?)\\s*```/);\n$json.output_json = json_match ? JSON.parse(json_match[1].trim()) : {};\ndelete $json.output;\n\nreturn $json;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2840,
        1320
      ],
      "id": "04a817f2-32a7-4386-a07f-8e0de8256d3c",
      "name": "ParseAIOutputJSON",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "toFile",
        "fileFormat": "csv",
        "options": {}
      },
      "name": "ConvertToCSV",
      "type": "n8n-nodes-base.spreadsheetFile",
      "typeVersion": 1,
      "position": [
        3060,
        1300
      ],
      "id": "225b7bab-5a34-479b-a597-e83c41aaccd5"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        3220,
        1300
      ],
      "id": "9edb1cf6-74e4-4888-808b-869b0baa5ec0",
      "name": "ExtractFromCSV"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$json['No.'] = $json['output_json.No.']\ndelete $json['output_json.No.']\n\n$json['Message'] = $json['output_json.Message']\ndelete $json['output_json.Message'];\n\n$json['overall_matching'] = $json['output_json.overall_matching']\ndelete $json['output_json.overall_matching'];\n\n\n$json['Missing Criteria'] = $json['output_json.Missing Criteria'] ;\ndelete $json['output_json.Missing Criteria'];\n\n\n$json['TODO'] = $json['output_json.TODO'];\ndelete $json['output_json.TODO'];\n\n\n$json['Source'] = $json['output_json.Source'];\ndelete $json['output_json.Source'];\n\n$json['Venue link'] = $('Loop Over Items').item.json['Venue link'];\ndelete $json['output_json.Venue link'];\n\n$json['Overall'] = $json['output_json.Overall'];\ndelete $json['output_json.Overall'];\n\n$json['Failed Criteria'] = $json['output_json.Failed Criteria'];\ndelete $json['output_json.Failed Criteria'];\n\n$json['Status'] = $json['output_json.Status'];\ndelete $json['output_json.Status'];\n\n$json['Note'] = $json['output_json.Note'];\ndelete $json['output_json.Note'];\n\n$json['HO/agent name'] = $json['output_json.HO/agent name'];\ndelete $json['output_json.HO/agent name'];\n\n$json['Address'] = $json['output_json.Address'];\ndelete $json['output_json.Address'];\n\n$json['Tel'] = $json['output_json.Tel'];\ndelete $json['output_json.Tel'];\n\n$json['house tour: date & time'] = $json['output_json.house tour: date & time'];\ndelete $json['output_json.house tour: date & time'];\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3460,
        1300
      ],
      "id": "d6c53380-0ec8-424b-bec4-4cfccd3bfa70",
      "name": "FlattenJSONFields"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 181710862,
          "mode": "list",
          "cachedResultName": "AI Venue",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit#gid=181710862"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {},
          "matchingColumns": [
            "Venue link"
          ],
          "schema": [
            {
              "id": "No.",
              "displayName": "No.",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Source",
              "displayName": "Source",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Venue link",
              "displayName": "Venue link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "overall_matching",
              "displayName": "overall_matching",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Overall",
              "displayName": "Overall",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Missing Criteria",
              "displayName": "Missing Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Failed Criteria",
              "displayName": "Failed Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Crimemapping/ Megans law",
              "displayName": "Crimemapping/ Megans law",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Message",
              "displayName": "Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Note",
              "displayName": "Note",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "TODO",
              "displayName": "TODO",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "HO/agent name",
              "displayName": "HO/agent name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Address",
              "displayName": "Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tel",
              "displayName": "Tel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "house tour: date & time",
              "displayName": "house tour: date & time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "error",
              "displayName": "error",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        4820,
        1440
      ],
      "id": "747feef8-281e-451f-a030-a1d8ca9bcbcd",
      "name": "UpdateAIVenueSheet",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "m0FT3RYyByBWA4FU",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 181710862,
          "mode": "list",
          "cachedResultName": "AI Venue",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit#gid=181710862"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Overall"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRange"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -2360,
        1120
      ],
      "id": "4a442a5f-e69d-4648-bdfd-c1921a23feaf",
      "name": "ReadAIVenueSheet1",
      "retryOnFail": true,
      "alwaysOutputData": false,
      "maxTries": 5,
      "waitBetweenTries": 2000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "NR0nyodc3Qsfs7Ne",
          "name": "Google Sheets account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "amount": 8
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        5160,
        1480
      ],
      "id": "413c1865-5b41-4d29-8fd6-f744a170a3f1",
      "name": "DelayExecution",
      "webhookId": "aeda6bdb-5b93-498b-977a-988c759de256"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7314f4dc-3f6f-4080-80b6-a6a682424109",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "theblueground",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "cebbc0c9-2f9b-42c8-9076-b5fa3c8d309a",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "housestay",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "f0b5264a-df22-4ff9-82d7-32719a9a9c7b",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "corporatehousingbyowner",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "66ee9e15-b6ac-4c17-b5d3-cad241ef835a",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "hellolanding",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "a47bbb49-e71e-4c2a-b858-e5548e11dfd7",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "corporatehousingbyowner",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "80b629c6-9ca9-48c8-8e61-7150ba0e6842",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "vrbo",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -220,
        940
      ],
      "id": "50ec8754-5997-4ed6-bba8-cf69bc94a33d",
      "name": "CheckVenueLinkSources1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=http://192.168.178.28:8004/scrape_url_html_content",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"url\": \"{{ $json[\"Venue link\"] }}\"} ",
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        240,
        1120
      ],
      "id": "c5d2dbbf-62c4-45ab-aa18-95cd9bdac5fd",
      "name": "ScrapeVenueHTML",
      "retryOnFail": true
    },
    {
      "parameters": {
        "url": "={{ $json[\"Venue link\"] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        60,
        860
      ],
      "id": "fc7723f2-bb8a-4fd5-a269-ced2ce5f507b",
      "name": "FetchVenueData",
      "retryOnFail": false,
      "alwaysOutputData": true,
      "executeOnce": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ded7e6b-ee26-4a4a-a3b5-27ad2e8a6b65",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "zillow",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "e274decb-9008-48fa-9b19-2443d22bddf2",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "furnishedfinder",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "c67265c5-e9c8-4f82-9b39-bbdc7faf6faf",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "trulia",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "d6c9196f-6e3e-4305-8334-72423c39a21d",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "giggster",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "d561883d-2100-4448-82f1-4198c4144ed2",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "tagvenue",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "dc2b3e94-517b-4cbb-9fcb-aebd52ff29b4",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "airbnb",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "9430d929-5e29-4d18-992a-1551876fcfa6",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "apartments.com",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            },
            {
              "id": "05f0c6f5-6381-48a4-8474-63a4c58780f7",
              "leftValue": "={{ $json[\"Venue link\"] }}",
              "rightValue": "forrent",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -260,
        1180
      ],
      "id": "f7e6748e-8930-4c9e-86af-e6a2e55c0271",
      "name": "CheckVenueLinkSources2"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$json['Crimemapping/ Megans law'] = `Megans law: ${$json.number_of_offenders}, Crimemapping: ${$json.number_of_crimes}`;\n$json['overal'] = \"no\"\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4400,
        600
      ],
      "id": "b25285ea-0d8f-4b0e-9434-1843586904c0",
      "name": "AddCrimeDataFields"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=http://192.168.178.28:8004/find-offenders",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"address\": \"{{ $json.Address.replaceAll(\"(AI note) \",\"\") }}\"} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3900,
        740
      ],
      "id": "aae43a17-a7cf-4c01-8aab-4caa916455c6",
      "name": "CheckCrimeData",
      "retryOnFail": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "51d1bea2-ed7d-4b60-a5a7-aab06d91d546",
              "leftValue": "={{ $json.Address }}",
              "rightValue": "\\d",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        3700,
        900
      ],
      "id": "d8bc332e-f209-4f0c-b959-a3c1411e4acb",
      "name": "ValidateAddressFormat"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$json['Crimemapping/ Megans law'] = \"Partial Address\"\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4180,
        1180
      ],
      "id": "a8220ada-fbb8-49b9-82c4-a42df16a6a6e",
      "name": "MarkPartialAddress"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n\n$('FlattenJSONFields').item.json[\"Crimemapping/ Megans law\"] = $json[\"Crimemapping/ Megans law\"]\nif ($json[\"overall\"]) {\n  $('FlattenJSONFields').item.json[\"overall_matching\"] = $json[\"overall\"];\n  $('FlattenJSONFields').item.json[\"Failed Criteria\"] = $('FlattenJSONFields').item.json[\"Failed Criteria\"] +\", Crime Number\" \n}\n\nreturn $('FlattenJSONFields').item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4560,
        980
      ],
      "id": "7d9cf0f7-d9e6-4eb4-8a83-de97bd35ea1d",
      "name": "UpdateCrimeFields"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -640,
        1020
      ],
      "id": "ba36aff0-2b72-4973-95b7-eeeffd0835b8",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "seconds",
              "secondsInterval": 5
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -2780,
        1260
      ],
      "id": "9b2b8e4f-46db-4249-a989-8f3317a23a1b",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name and an \"overall_matching\" field. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time, overall_matching. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{$json.data }}. Blacklist information is provided in {{ $('blacklist2_readder').item.json.data_black_list }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in {{$json.data }}.\nFill in missing fields or verify partially filled fields using listing data.\nVerify five key criteria (HOA, Parking, Share, Access, Blacklist) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the five key criteria.\nGenerate a tailored message for missing criteria, addressing the host by name.\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access, Blacklist), \"Failed Criteria\" listing failed criteria with reasons, \"Message\" with the customer clarification message, and \"overall_matching\" indicating the match status.\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\nVenue link: Retain the URL as provided.\nOverall: Summarize key property details in the format: \"[number] bedrooms · [number] beds · [number] baths · [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), blacklist status (for full addresses only), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the five key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the five key criteria only), or the status for Square Footage and Address. For Address, include blacklist status only for full addresses. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address, not blacklisted: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Not blacklisted.\"\n\nProperty details with full address, blacklisted: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Blacklisted.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124, Blacklist status unknown.\"\n\nCriteria explanations:\nFor missing (five key criteria): \"HOA: Missing, not specified in listing.\" or \"Blacklist: Missing, address is partial or no blacklist data provided.\"\n\nFor failed (five key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\" or \"Blacklist: Failed, address found in blacklist.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full, not blacklisted): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided; not found in blacklist.\"\n\nFor Address (full, blacklisted): \"Address: Failed, full address (2532 Gerald Way, San Jose, CA 95125) provided but found in blacklist.\"\n\nMissing Criteria: Verify the five key criteria (HOA, Parking, Share, Access, Blacklist) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking, Blacklist\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nBlacklist: Confirm the address is not in the static 'Rejected/Unavailable Venues' list or dynamically fetched blacklist data ({{ $('blacklist2_readder').item.json.data_black_list }}). The blacklist check applies only to full addresses (containing street number, street name, city, state, and ZIP code). If the address is partial (lacking any component) or no blacklist data is provided, list as \"Blacklist\" in \"Missing Criteria.\" If a full address is provided and found in the blacklist, list as \"Blacklist: Address found in blacklist\" in \"Failed Criteria.\" If a full address is provided and not found in the blacklist, do not list Blacklist in either \"Missing Criteria\" or \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability or the address is blacklisted, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access, Blacklist), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If a full address is checked against a blacklist, note the result (e.g., \"(AI note) Address not found in blacklist\" or \"(AI note) Address found in blacklist\"). If no blacklist data is provided, note \"(AI note) No blacklist data provided\". If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If the address is blacklisted, include \"address blacklisted, consider alternative properties\" in TODO. If filled, refine or append. If filled by AI, prepend \"(AI note)\".\nHO/agent name: Extract the homeowner’s or agent’s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isn’t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. Check if a full address is in the static 'Rejected/Unavailable Venues' list or dynamically fetched blacklist data ({{ $('blacklist2_readder').item.json.data_black_list }}). Partial addresses are not checked against the blacklist and result in \"Blacklist\" in \"Missing Criteria.\" The blacklist status is evaluated as part of the Blacklist criterion in Missing Criteria and Failed Criteria. If filled by AI, prepend \"(AI note)\".\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability, considering the current date and time (May 23, 2025, 07:46 PM +07). If unavailable, note \"(AI note) To be scheduled\". If the address is blacklisted, note \"(AI note) Tour not recommended due to blacklisted address\". If filled by AI, prepend \"(AI note)\".\noverall_matching: Add the field \"overall_matching\" with a value of one of the strings: \"yes\", \"no\", \"partial\", or \"unknown\".\n\"yes\": All main/must-have criteria (HOA, Access, Parking, Share, Blacklist) seem to be met based on the text (i.e., no HOA, full access, at least 2 private parking spaces, no shared spaces/individuals, full address not blacklisted) AND the venue is NOT found within the static 'Rejected/Unavailable Venues' list NOR in the dynamically fetched blacklist data.\n\n\"no\": Any main/must-have criteria are clearly NOT met (e.g., HOA present, off-limit areas, fewer than 2 parking spaces, shared spaces, full address blacklisted) OR the venue IS found within the static 'Rejected/Unavailable Venues' list OR in any of the dynamically fetched blacklist data.\n\n\"partial\": Some main/must-have criteria are met, but others are unknown or not mentioned (e.g., some criteria met, others missing, or address is partial so Blacklist is missing). The venue blacklist check might be \"yes\" or \"unknown\" depending on whether it's found in the static or dynamic lists.\n\n\"unknown\": Cannot determine overall matching based on the text, address blacklist status, or venue blacklist data (e.g., all criteria missing and no blacklist data).\nIf filled by AI, prepend \"(AI note)\" to the field value.\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nBlacklist: \"Can you confirm if the property address is listed in any restricted or blacklisted property databases?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\nExtract data directly from the listing page at the \"Venue link\" URL, using content from {{$json.data }}.\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the website’s data.\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable, considering the current date and time (May 23, 2025, 07:46 PM +07).\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\nEnsure \"Missing Criteria\" only lists missing information for the five key criteria (HOA, Access, Parking, Share, Blacklist). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access, Blacklist as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), \"Message\" field (with the customer clarification message addressed to the host name), and \"overall_matching\" field (indicating match status).\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\",\n    \"overall_matching\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\nDo not leave fields blank (e.g., ,); always use \"\".\nDo not overwrite human-filled fields unless blank.\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service, Address: San Jose, California\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nNo blacklist data provided ({{ $('blacklist2_readder').item.json.data_black_list }} is empty), so Blacklist criterion is missing due to partial address.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share, Blacklist\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\n5. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; no blacklist data provided; Blacklist criterion missing due to partial address; verify all criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria, including blacklist status, and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) partial\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\nNo blacklist data provided, so assume address is not blacklisted.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Not blacklisted. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided; not found in blacklist.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; no blacklist data provided; address not blacklisted; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\nNo blacklist data provided, so assume address is not blacklisted.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124, Not blacklisted. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided; not found in blacklist.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; no blacklist data provided; address not blacklisted; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Blacklist:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\nNo blacklist data provided, so Blacklist criterion is missing due to partial address.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share, Blacklist\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\n4. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; no blacklist data provided; Blacklist criterion missing due to partial address; verify other criteria including square footage, full address, and blacklist status\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria, including blacklist status, and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Blacklisted Address:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 2 private parking spaces, No HOA, Full access to all rooms, No shared spaces or individuals, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and assuming the address is blacklisted (hypothetical, as no blacklist data provided):\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\nAddress is blacklisted (hypothetical).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 2 private parking spaces, No HOA, Full access to all rooms, No shared spaces or individuals, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124, Blacklisted. Criteria status: HOA: Meets requirement, no HOA specified. Access: Meets requirement, full access to all rooms. Parking: Meets requirement, 2 private parking spaces provided. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Meets requirement, no shared spaces or individuals staying. Address: Failed, full address (1820 Anne Way, San Jose, CA 95124) provided but found in blacklist.\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"Blacklist: Address found in blacklist\",\n    \"Status\": \"(AI note) Unavailable\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and blacklist criteria; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; address found in blacklist (hypothetical)\",\n    \"TODO\": \"(AI note) Address blacklisted, consider alternative properties\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) Tour not recommended due to blacklisted address\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "72f5f5b5-7ceb-4606-9204-f73d537ebe25",
      "name": "AI company researcher1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2200,
        740
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2220,
        920
      ],
      "id": "0d7898cb-a1a7-45e0-ad3c-a82001f5bf51",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "HiNnEhVqjzuTBZ4X",
          "name": "Google Gemini(PaLM) Api account 2"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "249ea191-c16b-45e1-bc17-41f56379d962",
      "name": "AI company researcher2",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2200,
        1100
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2200,
        1280
      ],
      "id": "26143a93-4b3f-4841-bfd4-399b55679587",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "YftSL7shTvFaRPCF",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "d377c314-ce6f-4dfc-a08e-a8db3523fa23",
      "name": "AI company researcher3",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2200,
        1440
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2220,
        1640
      ],
      "id": "8f4c7710-fcec-4a25-a994-059e61c4ab7e",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "5MERI0rrycaMPtjo",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2180,
        2340
      ],
      "id": "0d60af1a-75fb-4a2e-9b09-fa33663231d7",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "FaVqL6ieJ9T6fHtd",
          "name": "Google Gemini(PaLM) Api account 5"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2220,
        1980
      ],
      "id": "b2134d48-6e46-490f-88ce-6c3cd263a884",
      "name": "Google Gemini Chat Model5",
      "credentials": {
        "googlePalmApi": {
          "id": "NKU8prVbjqxB8oC3",
          "name": "Google Gemini(PaLM) Api account 6"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2140,
        2980
      ],
      "id": "ae524183-cba3-4c7a-a090-57ff47858579",
      "name": "Google Gemini Chat Model6",
      "credentials": {
        "googlePalmApi": {
          "id": "19PGlbMH0G7yFvZ5",
          "name": "Google Gemini(PaLM) Api account 7"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2120,
        3340
      ],
      "id": "3b7720af-7cd7-46a7-99b8-86610ba382bc",
      "name": "Google Gemini Chat Model7",
      "credentials": {
        "googlePalmApi": {
          "id": "m9p9FXaoIrHPwx7m",
          "name": "Google Gemini(PaLM) Api account 8"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2140,
        2640
      ],
      "id": "8f0ff36e-135f-49c9-977e-60c0e320d6d4",
      "name": "Google Gemini Chat Model8",
      "credentials": {
        "googlePalmApi": {
          "id": "KKCV6TzFFb3NRvCJ",
          "name": "Google Gemini(PaLM) Api account 10"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "31fffffc-cd90-484f-b19a-47999813ee69",
      "name": "AI company researcher4",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2160,
        2160
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "0d1072fe-48b4-4f90-838e-7373628237e2",
      "name": "AI company researcher5",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2200,
        1800
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "024289ee-a878-45a7-a40a-9cfc5e58ecf6",
      "name": "AI company researcher6",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2140,
        2800
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "09bdcfbf-b968-4072-9fc5-f6b71d345b2e",
      "name": "AI company researcher7",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2120,
        3140
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{ JSON.stringify($json.data).replaceAll(\"\\t\",\"\").replaceAll(\"\\r\",\"\").replaceAll(\"\\n\",\"\").replaceAll(\"\\\\\",\"\").replaceAll(\" \",\"\") }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in Website content.\n\nFill in missing fields or verify partially filled fields using listing data.\n\nVerify four key criteria (HOA, Parking, Share, Access) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the four key criteria.\n\nGenerate a tailored message for missing criteria, addressing the host by name.\n\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access), \"Failed Criteria\" listing failed criteria with reasons, and \"Message\" with the customer clarification message.\n\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\n\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\n\nVenue link: Retain the URL as provided.\n\nOverall: Summarize key property details in the format: \"[number] bedrooms Â· [number] beds Â· [number] baths Â· [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the four key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the four key criteria only), or the status for Square Footage and Address. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address: \"3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124\".\n\nCriteria explanations:\nFor missing (four key criteria): \"HOA: Missing, not specified in listing.\"\n\nFor failed (four key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\"\n\nMissing Criteria: Verify only the four key criteria (HOA, Parking, Share, Access) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria szczegÃ³Å‚\n\nInstructions for Field Processing (continued):\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\n\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access only), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\ntext\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\n\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If filled, refine or append. If filled by AI, prepend \"(AI note)\".\n\nHO/agent name: Extract the homeownerâ€™s or agentâ€™s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isnâ€™t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. If filled by AI, prepend \"(AI note)\".\n\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\n\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability. If unavailable, note \"(AI note) To be scheduled\". If filled by AI, prepend \"(AI note)\".\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\n\nExtract data directly from the listing page at the \"Venue link\" URL, using content from Website content.\n\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\n\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\n\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\n\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the websiteâ€™s data.\n\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable.\n\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\n\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\n\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\n\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\n\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\n\nEnsure \"Missing Criteria\" only lists missing information for the four key criteria (HOA, Access, Parking, Share). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\n\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), and \"Message\" field (with the customer clarification message addressed to the host name).\n\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\n\nDo not leave fields blank (e.g., ,); always use \"\".\n\nDo not overwrite human-filled fields unless blank.\n\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\n\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\n\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; verify other criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Square Footage:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms Â· 3 beds Â· 2 baths Â· Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; verify other criteria including square footage and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "929f2049-836e-42c1-9a02-9408f0c233e4",
      "name": "ProcessVenueData8",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2120,
        2480
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 5,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1840,
        1820
      ],
      "id": "55e20ed3-fec4-4d9a-abb8-f1adf3c25043",
      "name": "RouteToResearcher5"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 6,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1820,
        2120
      ],
      "id": "78ce1517-b21e-4a3b-af51-7e6242f8bea8",
      "name": "RouteToResearcher4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 7,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1820,
        2480
      ],
      "id": "05df96bd-150e-4fb6-94fe-c58fefd04100",
      "name": "RouteToResearcher8"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 8,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1840,
        2780
      ],
      "id": "55a9d6c8-a8d6-46b2-b1ae-aa9c4918e263",
      "name": "RouteToResearcher6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 9,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1820,
        3160
      ],
      "id": "49a0bf5e-e664-4908-ab3c-7164951f59a9",
      "name": "RouteToResearcher7"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 1320,
        "width": 1560,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2760,
        800
      ],
      "id": "d12256b2-cfc3-4246-84f8-68dc6aefe160",
      "name": "NoteInitialData"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 1000,
        "width": 780,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -620,
        640
      ],
      "id": "aacc1b59-8418-41e6-8cf8-ce9b3e9135f7",
      "name": "NoteProcessingStage"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 3280,
        "width": 1160,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        300,
        320
      ],
      "id": "3b130dd2-8abd-4cd3-90ab-30f47217f586",
      "name": "NoteDataCollection"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 1000,
        "width": 780,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2380,
        440
      ],
      "id": "dd5db48d-912c-4c7e-87f2-107df0e1ca35",
      "name": "NoteAIAnalysis"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 1000,
        "width": 780,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1480,
        880
      ],
      "id": "bb9d87a4-3ba0-4eb9-a955-1fa2e171ddd6",
      "name": "NoteHTTPRequests"
    },
    {
      "parameters": {
        "content": "                             ",
        "height": 1000,
        "width": 780,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        3180,
        980
      ],
      "id": "330b2742-669b-430f-b239-e116028bb796",
      "name": "NoteCrimeCheck"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "11e01f55-b0f3-45b7-980c-b7ee6dbe8911",
              "leftValue": "={{ $json.number_of_offenders }}",
              "rightValue": 15,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            },
            {
              "id": "2dd9a4e2-2e01-4747-b19f-9233936090f6",
              "leftValue": "={{ $json.number_of_crimes }}",
              "rightValue": 8,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        4140,
        760
      ],
      "id": "4eec72ce-0e56-4673-a334-30a7cd3e40d0",
      "name": "CheckCrimeThreshold"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$json['Crimemapping/ Megans law'] = `Megans law: ${$json.number_of_offenders}, Crimemapping: ${$json.number_of_crimes}`;\n\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4340,
        820
      ],
      "id": "31c6c30f-ec88-489f-9703-72cdb8c8a768",
      "name": "FormatCrimeData"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 181710862,
          "mode": "list",
          "cachedResultName": "AI Venue",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit#gid=181710862"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Overall"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRange"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -2040,
        1000
      ],
      "id": "bb9eb639-f0eb-4951-b1a2-16cbdec9f633",
      "name": "ReadAIVenueSheet2",
      "retryOnFail": true,
      "alwaysOutputData": false,
      "executeOnce": false,
      "maxTries": 5,
      "waitBetweenTries": 5000,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "UoiMoesH9gnVe19u",
          "name": "Google Sheets account 3"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 181710862,
          "mode": "list",
          "cachedResultName": "AI Venue",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit#gid=181710862"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {},
          "matchingColumns": [
            "Venue link"
          ],
          "schema": [
            {
              "id": "No.",
              "displayName": "No.",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Source",
              "displayName": "Source",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Venue link",
              "displayName": "Venue link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "overall_matching",
              "displayName": "overall_matching",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Overall",
              "displayName": "Overall",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Missing Criteria",
              "displayName": "Missing Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Failed Criteria",
              "displayName": "Failed Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Crimemapping/ Megans law",
              "displayName": "Crimemapping/ Megans law",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Message",
              "displayName": "Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Note",
              "displayName": "Note",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "TODO",
              "displayName": "TODO",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "HO/agent name",
              "displayName": "HO/agent name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Address",
              "displayName": "Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tel",
              "displayName": "Tel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "house tour: date & time",
              "displayName": "house tour: date & time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ï»¿error",
              "displayName": "ï»¿error",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "col_6",
              "displayName": "col_6",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "output_json.overall_matching",
              "displayName": "output_json.overall_matching",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1160,
        1440
      ],
      "id": "7604a273-30fd-43fa-8903-28dedb142629",
      "name": "UpdateAIVenueSheetError",
      "retryOnFail": true,
      "maxTries": 5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "m0FT3RYyByBWA4FU",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$('Google Sheets5').item.json.Overall = \"The address already screen\"\n$('Google Sheets5').item.json.overall_matching = \"No\" \nreturn $('Google Sheets5').item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1440,
        1400
      ],
      "id": "2b6a041c-2424-4db8-a86b-add67a099110",
      "name": "MarkScreenedAddress"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/10Bcq97Pr7tNidG5uahxhojnocXDhQdJE9ni1vEfp8qg/edit?gid=627995546#gid=627995546",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 627995546,
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/10Bcq97Pr7tNidG5uahxhojnocXDhQdJE9ni1vEfp8qg/edit#gid=627995546"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -240,
        180
      ],
      "id": "3f46f29c-ade8-4e48-a311-8749cc209783",
      "name": "ReadBlacklistSheet1",
      "retryOnFail": true,
      "alwaysOutputData": false,
      "maxTries": 5,
      "waitBetweenTries": 2000,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "NR0nyodc3Qsfs7Ne",
          "name": "Google Sheets account 2"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1bwpAAi8eGtppgL1JDjMfMxvjvY_bcV9qME_fFu8UxnI/edit?gid=1989859148#gid=1989859148",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1989859148,
          "mode": "list",
          "cachedResultName": "Sheet 1 - Venue Status Overview",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1bwpAAi8eGtppgL1JDjMfMxvjvY_bcV9qME_fFu8UxnI/edit#gid=1989859148"
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "detectAutomatically"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        20,
        -20
      ],
      "id": "8d0dc897-9734-43de-b810-7d115a4a561c",
      "name": "ReadBlacklistSheet2",
      "retryOnFail": true,
      "alwaysOutputData": false,
      "maxTries": 5,
      "waitBetweenTries": 2000,
      "executeOnce": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "UoiMoesH9gnVe19u",
          "name": "Google Sheets account 3"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        720,
        320
      ],
      "id": "d0c4ef36-53ef-4750-9b59-0258464f5110",
      "name": "ConvertBlacklistToFile"
    },
    {
      "parameters": {
        "operation": "text",
        "destinationKey": "data_black_list",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        940,
        300
      ],
      "id": "775575b5-d52d-43ea-98ec-2e680c1f52bd",
      "name": "ExtractBlacklistData"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        240,
        140
      ],
      "id": "bda87f77-6f61-478e-b133-967879e3d772",
      "name": "CombineBlacklistData"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit?usp=sharing",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 181710862,
          "mode": "list",
          "cachedResultName": "AI Venue",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1VF2OD700xD_mVML_cwKjk4_biGphB1kicOkVu4X3Tlc/edit#gid=181710862"
        },
        "columns": {
          "mappingMode": "autoMapInputData",
          "value": {},
          "matchingColumns": [
            "Venue link"
          ],
          "schema": [
            {
              "id": "No.",
              "displayName": "No.",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Source",
              "displayName": "Source",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Venue link",
              "displayName": "Venue link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "overall_matching",
              "displayName": "overall_matching",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Overall",
              "displayName": "Overall",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Missing Criteria",
              "displayName": "Missing Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Failed Criteria",
              "displayName": "Failed Criteria",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Crimemapping/ Megans law",
              "displayName": "Crimemapping/ Megans law",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Message",
              "displayName": "Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Note",
              "displayName": "Note",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "TODO",
              "displayName": "TODO",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "HO/agent name",
              "displayName": "HO/agent name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Address",
              "displayName": "Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Tel",
              "displayName": "Tel",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "house tour: date & time",
              "displayName": "house tour: date & time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "error",
              "displayName": "error",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1220,
        1020
      ],
      "id": "32d985b4-de56-4b3c-b951-06fc7588af7d",
      "name": "UpdateAIVenueSheetInitial",
      "retryOnFail": true,
      "maxTries": 5,
      "alwaysOutputData": false,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "m0FT3RYyByBWA4FU",
          "name": "Google Sheets account"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "406ea0a1-1132-4305-b0de-97c2e3f0380f",
              "leftValue": "={{ $json['Venue link'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1740,
        1100
      ],
      "id": "0865641e-8613-4be4-b5e2-620a31f67291",
      "name": "CheckVenueLinkNotEmpty"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "406ea0a1-1132-4305-b0de-97c2e3f0380f",
              "leftValue": "={{ $json['Venue link'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -980,
        1000
      ],
      "id": "67e3675a-218f-47f4-ae66-fcdf537b1e7c",
      "name": "Avoid Get blank Link"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$json.Overall = \"(AI Processing)\"\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1520,
        1080
      ],
      "id": "f86a1f6e-bff9-433a-a5a9-3e3f259f2366",
      "name": "Set Status for Link"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 2,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1820,
        1020
      ],
      "id": "d904462a-2676-4e93-9ad7-d0830255d98c",
      "name": "RouteToResearcher"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 1,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            },
            {
              "id": "5f441d3c-c8e6-4993-a174-6f9e5b4c4f85",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1800,
        760
      ],
      "id": "655007f8-0890-4dd9-a27f-4efe80763a51",
      "name": "RouteToResearcher1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 3,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1820,
        1320
      ],
      "id": "3b7fee17-bb35-46a9-8b59-f29f194a1160",
      "name": "RouteToResearcher2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "62266741-d8dd-4485-b439-c7797a799efe",
              "leftValue": "={{ $json.myNewField }}",
              "rightValue": 4,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            },
            {
              "id": "e7455a24-09be-46c0-950c-105545711404",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1840,
        1540
      ],
      "id": "5d440b2f-622c-4504-8246-166b8dfaa0ce",
      "name": "RouteToResearcher3"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Function to check if a value is a number\n// item.json.myNewField = Math.floor(Math.random() * 9);\nitem.json.myNewField = 1;\n\nitem.json.data \nreturn item  ;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1400,
        1100
      ],
      "id": "f10cc9a9-a37f-4a9d-832d-ce43505df499",
      "name": "KeyRotation"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Your task is to process a single JSON object representing a Google Sheet row, extract data from the provided website listing in the \"Venue link\" field, fill in missing fields, verify specific criteria, and return a JSON object with all fields, including a tailored message for missing criteria addressed to the host's name and an \"overall_matching\" field. The input JSON represents a Google Sheet with the following fields: No., Source, Venue link, Overall, Missing Criteria, Failed Criteria, Status, Message, Note, TODO, HO/agent name, Address, Tel, house tour: date & time, overall_matching. The Venue link field contains URLs from FurnishedFinder or Airbnb. Website content is provided in {{$json.data }}. Blacklist information is provided in {{ $('ExtractBlacklistData').item.json.data_black_list }}.\nInput JSON:\njson\n\n{\n    \"No.\": \"{{ $('Loop Over Items').item.json['No.'] }}\",\n    \"Source\": \"{{ $('Loop Over Items').item.json.Source }}\",\n    \"Venue link\": \"{{ $('Loop Over Items').item.json['Venue link'] }}\",\n    \"Overall\": \"{{ $('Loop Over Items').item.json.Overall }}\",\n    \"Missing Criteria\": \"{{ $('Loop Over Items').item.json['Missing Criteria'] }}\",\n    \"Failed Criteria\": \"{{ $('Loop Over Items').item.json['Failed Criteria'] }}\",\n    \"Status\": \"{{ $('Loop Over Items').item.json.Status }}\",\n    \"Message\": \"{{ $('Loop Over Items').item.json.Message }}\",\n    \"Note\": \"{{ $('Loop Over Items').item.json.Note }}\",\n    \"TODO\": \"{{ $('Loop Over Items').item.json.TODO }}\",\n    \"HO/agent name\": \"{{ $('Loop Over Items').item.json['HO/agent name'] }}\",\n    \"Address\": \"{{ $('Loop Over Items').item.json.Address }}\",\n    \"Tel\": \"{{ $('Loop Over Items').item.json.Tel }}\",\n    \"house tour: date & time\": \"{{ $('Loop Over Items').item.json['house tour: date & time'] }}\"\n}\n\nTask Overview:\nExtract data from the listing page at the \"Venue link\" URL, using the website content provided in {{$json.data }}.\nFill in missing fields or verify partially filled fields using listing data.\nVerify five key criteria (HOA, Parking, Share, Access, Blacklist) for Missing Criteria and Failed Criteria, while reporting on all six criteria (HOA, Access, Parking, Square Footage, Share, Address) in Overall. Distinguish between missing (absent/unclear) and failed (specified but does not meet requirements) for the five key criteria.\nGenerate a tailored message for missing criteria, addressing the host by name.\nReturn a JSON object, keyed by No., containing all fields (existing and updated), with \"Missing Criteria\" listing missing criteria (from HOA, Parking, Share, Access, Blacklist), \"Failed Criteria\" listing failed criteria with reasons, \"Message\" with the customer clarification message, and \"overall_matching\" indicating the match status.\nInstructions for Field Processing:\nNo.: Retain the row number as provided.\nSource: Retain the source (e.g., FurnishedFinder, Airbnb) as provided.\nVenue link: Retain the URL as provided.\nOverall: Summarize key property details in the format: \"[number] bedrooms · [number] beds · [number] baths · [number] sq. ft.\", followed by other key details including parking, HOA status, address (full or partial, as extracted from the listing), blacklist status (for full addresses only), and additional amenities (e.g., pool, gym, maid service) as available. When a full address is provided (containing street number, street name, city, state, and ZIP code), format it exactly as: \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"). If the address is provided in a different format but contains all components, transform it to the correct format. Include an explanation for each of the six criteria (HOA, Access, Parking, Square Footage, Share, Address) stating why it is listed in \"Missing Criteria\" (absent/unclear, for the five key criteria only) or \"Failed Criteria\" (specified but does not meet requirements, for the five key criteria only), or the status for Square Footage and Address. For Address, include blacklist status only for full addresses. If partially filled, append or refine with listing data. If filled by AI, prepend \"(AI note)\". If square footage is not specified in the listing, include \"Unknown sq. ft.\" in the initial format.\nExample format within Overall:\nProperty details with partial address: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California.\"\n\nProperty details with full address, not blacklisted: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Not blacklisted.\"\n\nProperty details with full address, blacklisted: \"3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Blacklisted.\"\n\nProperty details with transformed address: If provided as \"San Jose, CA, 95124, 1820 Anne Way\", transform to \"1820 Anne Way, San Jose, CA 95124, Blacklist status unknown.\"\n\nCriteria explanations:\nFor missing (five key criteria): \"HOA: Missing, not specified in listing.\" or \"Blacklist: Missing, address is partial or no blacklist data provided.\"\n\nFor failed (five key criteria): \"Share: Failed, shared parking and backyard with neighbors specified.\" or \"Blacklist: Failed, address found in blacklist.\"\n\nFor Square Footage: \"Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement.\" or \"Square Footage: Missing, not specified in listing.\"\n\nFor Address (partial): \"Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\"\n\nFor Address (full, not blacklisted): \"Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided; not found in blacklist.\"\n\nFor Address (full, blacklisted): \"Address: Failed, full address (2532 Gerald Way, San Jose, CA 95125) provided but found in blacklist.\"\n\nMissing Criteria: Verify the five key criteria (HOA, Parking, Share, Access, Blacklist) in the listing (in the \"Overall\" field, other listing sections, or Website content). List any of these where information is absent or unclear in a comma-separated string (e.g., \"HOA, Access, Parking, Blacklist\"). If none are missing, use an empty string: \"\". Do not include Square Footage or Address in this field. Do not prepend \"(AI note)\" to this field.\nHOA: Confirm the venue is not under a Homeowners Association (HOA). The listing must explicitly state there is no HOA. If unclear or not mentioned, list as \"HOA\" in \"Missing Criteria.\" If the listing states the property is under an HOA, list as \"HOA: Property is under an HOA\" in \"Failed Criteria.\"\n\nAccess: Ensure there are no off-limit areas. Verify all rooms are fully accessible to guests without restrictions. If unclear or not mentioned, list as \"Access\" in \"Missing Criteria.\" If the listing specifies off-limit areas (e.g., locked rooms), list as \"Access: Off-limit areas specified\" in \"Failed Criteria.\"\n\nParking: Confirm at least 2 private parking spaces are available for guest use. If unclear or not mentioned, list as \"Parking\" in \"Missing Criteria.\" If the listing specifies fewer than 2 private parking spaces, list as \"Parking: Only [number] private parking space(s) specified, below 2 required\" in \"Failed Criteria.\"\n\nShare: Ensure no individuals (e.g., caretakers, security guards, gardeners) will stay at the venue during the guest's stay, and no spaces or amenities (including parking, backyards, gardens, driveways, pools, entrances, or utilities) are shared with neighbors or others. If unclear or not mentioned, list as \"Share\" in \"Missing Criteria.\" If the listing specifies individuals staying or shared spaces/amenities (e.g., shared parking, backyard, or pool with neighbors), list as \"Share: Shared spaces, amenities, or individuals staying specified\" in \"Failed Criteria.\"\n\nBlacklist: Confirm the address is not in the static 'Rejected/Unavailable Venues' list or dynamically fetched blacklist data ({{ $('ExtractBlacklistData').item.json.data_black_list }}). The blacklist check applies only to full addresses (containing street number, street name, city, state, and ZIP code). If the address is partial (lacking any component) or no blacklist data is provided, list as \"Blacklist\" in \"Missing Criteria.\" If a full address is provided and found in the blacklist, list as \"Blacklist: Address found in blacklist\" in \"Failed Criteria.\" If a full address is provided and not found in the blacklist, do not list Blacklist in either \"Missing Criteria\" or \"Failed Criteria.\"\n\nStatus: If blank, set to \"Pending\" unless the listing indicates unavailability or the address is blacklisted, then set to \"Unavailable\". If filled by AI, prepend \"(AI note)\".\nMessage: Generate a message requesting clarification for missing criteria (from HOA, Parking, Share, Access, Blacklist), addressing the host by name using the \"HO/agent name\" field (if available) or extracted from the listing. If no name is available, use \"Guest\". Follow the format below. If no criteria are missing, set to \"\". If filled by AI, prepend \"(AI note)\".\n\nHi [Host Name or \"Guest\"], I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\nWould appreciate it if you could clarify a few points:\nCould you please clarify the following:\n1. [Question for first missing criterion]\n2. [Question for second missing criterion]\n...\nThank you for your time and consideration.\nSincerely,\n\nNote: Add comments about the property (e.g., negotiation status, features, concerns). If the address is partial, note it explicitly (e.g., \"(AI note) Address is partial, only city and state provided\"). If a full address is transformed, note the original format and the transformation (e.g., \"(AI note) Address transformed from 'San Jose, CA, 95124, 1820 Anne Way' to '1820 Anne Way, San Jose, CA 95124'\"). If a full address is checked against a blacklist, note the result (e.g., \"(AI note) Address not found in blacklist\" or \"(AI note) Address found in blacklist\"). If no blacklist data is provided, note \"(AI note) No blacklist data provided\". If filled, refine or append based on listing data, but do not overwrite human notes unless blank. If filled by AI, prepend \"(AI note)\".\nTODO: Suggest next steps (e.g., \"schedule house tour\", \"contact agent\", \"verify missing details\"). If the address is blacklisted, include \"address blacklisted, consider alternative properties\" in TODO. If filled, refine or append. If filled by AI, prepend \"(AI note)\".\nHO/agent name: Extract the homeowner’s or agent’s name. For FurnishedFinder, check owner contact info; for Airbnb, use the host name. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\nAddress: Extract the full address. If all components (street number, street name, city, state, ZIP code) are provided, format it exactly as \"[street number] [street name], [city], [state] [ZIP code]\" (e.g., \"1820 Anne Way, San Jose, CA 95124\"), transforming from any incorrect format if necessary. For Airbnb, use city or neighborhood if the full address isn’t listed, noting \"(AI note) Partial address\". For FurnishedFinder, the full address is often available. Check if a full address is in the static 'Rejected/Unavailable Venues' list or dynamically fetched blacklist data ({{ $('ExtractBlacklistData').item.json.data_black_list }}). Partial addresses are not checked against the blacklist and result in \"Blacklist\" in \"Missing Criteria.\" The blacklist status is evaluated as part of the Blacklist criterion in Missing Criteria and Failed Criteria. If filled by AI, prepend \"(AI note)\".\nTel: Extract the contact phone number. If unavailable, note \"(AI note) Not provided\". If filled by AI, prepend \"(AI note)\".\nhouse tour: date & time: Suggest a tour date and time within Airbnb check-in/check-out dates or FurnishedFinder availability, considering the current date and time (May 23, 2025, 07:46 PM +07). If unavailable, note \"(AI note) To be scheduled\". If the address is blacklisted, note \"(AI note) Tour not recommended due to blacklisted address\". If filled by AI, prepend \"(AI note)\".\noverall_matching: Add the field \"overall_matching\" with a value of one of the strings: \"yes\", \"no\", \"partial\", or \"unknown\".\n\"yes\": All main/must-have criteria (HOA, Access, Parking, Share, Blacklist) seem to be met based on the text (i.e., no HOA, full access, at least 2 private parking spaces, no shared spaces/individuals, full address not blacklisted) AND the venue is NOT found within the static 'Rejected/Unavailable Venues' list NOR in the dynamically fetched blacklist data.\n\n\"no\": Any main/must-have criteria are clearly NOT met (e.g., HOA present, off-limit areas, fewer than 2 parking spaces, shared spaces, full address blacklisted) OR the venue IS found within the static 'Rejected/Unavailable Venues' list OR in any of the dynamically fetched blacklist data.\n\n\"partial\": Some main/must-have criteria are met, but others are unknown or not mentioned (e.g., some criteria met, others missing, or address is partial so Blacklist is missing). The venue blacklist check might be \"yes\" or \"unknown\" depending on whether it's found in the static or dynamic lists.\n\n\"unknown\": Cannot determine overall matching based on the text, address blacklist status, or venue blacklist data (e.g., all criteria missing and no blacklist data).\nIf filled by AI, prepend \"(AI note)\" to the field value.\n\nQuestions for Missing Criteria:\nHOA: \"Is the property subject to HOA restrictions?\"\n\nAccess: \"Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\"\n\nParking: \"How many private parking spaces are available?\"\n\nShare: \"Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\"\n\nBlacklist: \"Can you confirm if the property address is listed in any restricted or blacklisted property databases?\"\n\nGeneral Instructions:\nProcess all rows from the provided JSON object.\nExtract data directly from the listing page at the \"Venue link\" URL, using content from {{$json.data }}.\nFor FurnishedFinder: Check owner contact info, address, property details, and amenities (e.g., \"Property Features\" section for pet policy, utilities).\nFor Airbnb: Check host name, property description, amenities, and location. Full addresses are often unavailable; use partial location data if needed.\nIf a URL is inaccessible, note \"(AI note) Link inaccessible\" in the Note field and leave missing fields as \"(AI note) Not provided\" or retain existing data.\nIf data contradicts existing entries (e.g., different agent name), note the discrepancy in the Note field with \"(AI note)\" and use the website’s data.\nUse Airbnb check-in/check-out dates to suggest house tour dates where applicable, considering the current date and time (May 23, 2025, 07:46 PM +07).\nRespect existing data in Failed Criteria (e.g., \"15 offenders\") and incorporate it.\nReflect negotiation mentions (e.g., \"wait tata to negociate\") in Note and TODO.\nDo not overwrite human-filled fields (e.g., Note, Message, or others) unless blank.\nFor fields that remain missing due to lack of data, use \"(AI note) Not provided\" or \"(AI note) Unknown\" as appropriate.\nPrepend \"(AI note)\" to any field filled or modified by AI, except for \"Missing Criteria\" and \"Failed Criteria.\"\nEnsure \"Missing Criteria\" only lists missing information for the five key criteria (HOA, Access, Parking, Share, Blacklist). If a criterion is specified but fails, list it in \"Failed Criteria\" with the reason.\nOutput a single JSON object, keyed by No., containing all fields (existing and updated), including the \"Missing Criteria\" field (listing missing criteria from HOA, Parking, Share, Access, Blacklist as a comma-separated string), \"Failed Criteria\" (listing failed criteria with reasons in a comma-separated string), \"Message\" field (with the customer clarification message addressed to the host name), and \"overall_matching\" field (indicating match status).\nRequired Output Format:\njson\n\n{\n    \"No.\": \"\",\n    \"Source\": \"\",\n    \"Venue link\": \"\",\n    \"Overall\": \"\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"\",\n    \"Message\": \"\",\n    \"Note\": \"\",\n    \"TODO\": \"\",\n    \"HO/agent name\": \"\",\n    \"Address\": \"\",\n    \"Tel\": \"\",\n    \"house tour: date & time\": \"\",\n    \"overall_matching\": \"\"\n}\n\nImportance:\nReturn JSON only, and all fields must be in string format (e.g., \"\"). If empty, return \"\".\nDo not leave fields blank (e.g., ,); always use \"\".\nDo not overwrite human-filled fields unless blank.\nDo not add, remove, or rename fields. Do not change the structure or formatting of the JSON.\nEnsure the output is valid JSON, with all fields present and in the exact order shown above.\nExample Output (Adjusted for Provided Data with Partial Address):\nBased on the provided website content: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Close to Downtown Saratoga, Weekly Maid service, Address: San Jose, California\" and assuming:\nNo mention of HOA, Access, or Share (missing).\n\n\"Secure on Estate ground parking\" is unclear about the number of private parking spaces (missing).\n\nSquare Footage (1500 sq. ft.) is specified but fails (reported in Overall only).\n\nAddress is partial: \"San Jose, California\" (noted in Note and Overall).\n\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nNo blacklist data provided ({{ $('ExtractBlacklistData').item.json.data_black_list }} is empty), so Blacklist criterion is missing due to partial address.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., Secure on Estate ground parking, Gated and Fenced 1.5 Acre grounds, Weekly Maid service, Address: San Jose, California. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Missing, number of private parking spaces unclear. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (San Jose, California) provided, lacks street number and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Parking, Share, Blacklist\",\n    \"Failed Criteria\": \"\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. How many private parking spaces are available?\\n4. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\n5. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property does not meet square footage requirement; address is partial, only city and state provided; no blacklist data provided; Blacklist criterion missing due to partial address; verify all criteria and full address\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria, including blacklist status, and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: San Jose, California\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) partial\"\n}\n\nExample Output with Multiple Failed Criteria and Full Address (Transformed):\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: San Jose, CA, 95125, 2532 Gerald Way\" and no mention of Access:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"San Jose, CA, 95125, 2532 Gerald Way\" to \"2532 Gerald Way, San Jose, CA 95125\".\n\nNo blacklist data provided, so assume address is not blacklisted.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, HOA present, Shared parking and backyard with neighbors, Weekly Maid service, Address: 2532 Gerald Way, San Jose, CA 95125, Not blacklisted. Criteria status: HOA: Failed, property is under an HOA. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Failed, shared parking and backyard with neighbors specified. Address: Meets requirement, full address (2532 Gerald Way, San Jose, CA 95125) provided; not found in blacklist.\",\n    \"Missing Criteria\": \"Access\",\n    \"Failed Criteria\": \"HOA: Property is under an HOA, Parking: Only 1 private parking space specified, below 2 required, Share: Shared spaces, amenities, or individuals staying specified\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails multiple criteria including square footage; address transformed from 'San Jose, CA, 95125, 2532 Gerald Way' to '2532 Gerald Way, San Jose, CA 95125'; no blacklist data provided; address not blacklisted; verify access\",\n    \"TODO\": \"(AI note) Contact host to clarify access and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 2532 Gerald Way, San Jose, CA 95125\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Full Address and Some Missing Criteria:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 1 private parking space, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and no mention of HOA, Access, or Share:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\nNo blacklist data provided, so assume address is not blacklisted.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124, Not blacklisted. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Meets requirement, full address (1820 Anne Way, San Jose, CA 95124) provided; not found in blacklist.\",\n    \"Missing Criteria\": \"HOA, Access, Share\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and parking; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; no blacklist data provided; address not blacklisted; verify other criteria\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria and discuss failed criteria\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Missing Square Footage and Partial Address:\nAssuming the listing specifies: \"(AI note) 3 Bedroom, 2 Bathroom, 1 private parking space, Address: Sunnyvale, CA, Weekly Maid service\" and no mention of HOA, Access, Share, or Blacklist:\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nAddress is partial: \"Sunnyvale, CA\" (missing street number, street name, and ZIP code).\n\nNo blacklist data provided, so Blacklist criterion is missing due to partial address.\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · Unknown sq. ft., 1 private parking space, No HOA specified, Weekly Maid service, Address: Sunnyvale, CA. Criteria status: HOA: Missing, not specified in listing. Access: Missing, no information on off-limit areas. Parking: Failed, only 1 private parking space specified, below 2 required. Square Footage: Missing, not specified in listing. Share: Missing, no information on shared spaces, amenities, or individuals staying. Address: Partial, only city and state (Sunnyvale, CA) provided, lacks street number, street name, and ZIP code.\",\n    \"Missing Criteria\": \"HOA, Access, Share, Blacklist\",\n    \"Failed Criteria\": \"Parking: Only 1 private parking space specified, below 2 required\",\n    \"Status\": \"(AI note) Pending\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Is the property subject to HOA restrictions?\\n2. Are there any areas or rooms within the property that would be off-limits to the renters during the rental period?\\n3. Are there any shared spaces (e.g., parking, backyards, gardens, driveways, pools, entrances) or amenities with neighbors, or will any individuals (e.g., caretakers, security guards, gardeners) be staying at the property during the rental period?\\n4. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails parking requirement; address is partial, only city and state provided; no blacklist data provided; Blacklist criterion missing due to partial address; verify other criteria including square footage, full address, and blacklist status\",\n    \"TODO\": \"(AI note) Contact host to clarify missing criteria, including blacklist status, and request full address\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) Partial address: Sunnyvale, CA\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) To be scheduled\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\nExample Output with Blacklisted Address:\nAssuming the listing specifies: \"(AI note) 1500 Sq. Ft., 3 Bedroom, 2 Bathroom, 2 private parking spaces, No HOA, Full access to all rooms, No shared spaces or individuals, Address: 1820 Anne Way San Jose California 95124, Weekly Maid service\" and assuming the address is blacklisted (hypothetical, as no blacklist data provided):\nAssuming 3 bedrooms, 3 beds, 2 baths for the format.\n\nTransform address from \"1820 Anne Way San Jose California 95124\" to \"1820 Anne Way, San Jose, CA 95124\".\n\nAddress is blacklisted (hypothetical).\n\njson\n\n{\n    \"No.\": \"2\",\n    \"Source\": \"FurnishedFinder\",\n    \"Venue link\": \"https://www.furnishedfinder.com/property/623840_1\",\n    \"Overall\": \"(AI note) 3 bedrooms · 3 beds · 2 baths · 1500 sq. ft., 2 private parking spaces, No HOA, Full access to all rooms, No shared spaces or individuals, Weekly Maid service, Address: 1820 Anne Way, San Jose, CA 95124, Blacklisted. Criteria status: HOA: Meets requirement, no HOA specified. Access: Meets requirement, full access to all rooms. Parking: Meets requirement, 2 private parking spaces provided. Square Footage: Failed, specified as 1500 sq. ft., below 1600 sq. ft. requirement. Share: Meets requirement, no shared spaces or individuals staying. Address: Failed, full address (1820 Anne Way, San Jose, CA 95124) provided but found in blacklist.\",\n    \"Missing Criteria\": \"\",\n    \"Failed Criteria\": \"Blacklist: Address found in blacklist\",\n    \"Status\": \"(AI note) Unavailable\",\n    \"Message\": \"(AI note) Hi Jan Schulze, I am contacting you on behalf of Tata Elxsi. We are seeking a furnished rental for VR testing purposes for a 1-2 month period.\\nWould appreciate it if you could clarify a few points:\\nCould you please clarify the following:\\n1. Can you confirm if the property address is listed in any restricted or blacklisted property databases?\\nThank you for your time and consideration.\\nSincerely,\",\n    \"Note\": \"(AI note) Property fails square footage and blacklist criteria; address transformed from '1820 Anne Way San Jose California 95124' to '1820 Anne Way, San Jose, CA 95124'; address found in blacklist (hypothetical)\",\n    \"TODO\": \"(AI note) Address blacklisted, consider alternative properties\",\n    \"HO/agent name\": \"(AI note) Jan Schulze\",\n    \"Address\": \"(AI note) 1820 Anne Way, San Jose, CA 95124\",\n    \"Tel\": \"(AI note) Not provided\",\n    \"house tour: date & time\": \"(AI note) Tour not recommended due to blacklisted address\",\n    \"overall_matching\": \"(AI note) no\"\n}\n\n",
        "hasOutputParser": true,
        "options": {}
      },
      "id": "c95f657c-80a8-444f-aafa-d7aa4c0f019d",
      "name": "AI company researcher8",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        2180,
        280
      ],
      "typeVersion": 1.6,
      "retryOnFail": false,
      "maxTries": 3,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2200,
        480
      ],
      "id": "12ccbfa5-b856-4270-8a96-944899c448c2",
      "name": "Google Gemini Chat Model9",
      "credentials": {
        "googlePalmApi": {
          "id": "5MERI0rrycaMPtjo",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    }
  ],
  "connections": {
    "ParseAIOutputJSON": {
      "main": [
        [
          {
            "node": "ConvertToCSV",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ConvertToCSV": {
      "main": [
        [
          {
            "node": "ExtractFromCSV",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ExtractFromCSV": {
      "main": [
        [
          {
            "node": "FlattenJSONFields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FlattenJSONFields": {
      "main": [
        [
          {
            "node": "ValidateAddressFormat",
            "type": "main",
            "index": 0
          },
          {
            "node": "UpdateCrimeFields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateAIVenueSheet": {
      "main": [
        [
          {
            "node": "DelayExecution",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ReadAIVenueSheet1": {
      "main": [
        [
          {
            "node": "ReadAIVenueSheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DelayExecution": {
      "main": [
        [
          {
            "node": "Avoid Get blank Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckVenueLinkSources1": {
      "main": [
        [
          {
            "node": "FetchVenueData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ScrapeVenueHTML": {
      "main": [
        [
          {
            "node": "KeyRotation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FetchVenueData": {
      "main": [
        [
          {
            "node": "KeyRotation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckVenueLinkSources2": {
      "main": [
        [
          {
            "node": "ScrapeVenueHTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AddCrimeDataFields": {
      "main": [
        [
          {
            "node": "UpdateCrimeFields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckCrimeData": {
      "main": [
        [
          {
            "node": "CheckCrimeThreshold",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ValidateAddressFormat": {
      "main": [
        [
          {
            "node": "CheckCrimeData",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "MarkPartialAddress",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MarkPartialAddress": {
      "main": [
        [
          {
            "node": "UpdateCrimeFields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateCrimeFields": {
      "main": [
        [
          {
            "node": "UpdateAIVenueSheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "CheckVenueLinkSources1",
            "type": "main",
            "index": 0
          },
          {
            "node": "CheckVenueLinkSources2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "ReadAIVenueSheet1",
            "type": "main",
            "index": 0
          },
          {
            "node": "ReadBlacklistSheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher1": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher2": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher3": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher4",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher5",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher6",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher7",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher4": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher5": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher6": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher7": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ProcessVenueData8": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher5": {
      "main": [
        [
          {
            "node": "AI company researcher5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher4": {
      "main": [
        [
          {
            "node": "AI company researcher4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher8": {
      "main": [
        [
          {
            "node": "ProcessVenueData8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher6": {
      "main": [
        [
          {
            "node": "AI company researcher6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher7": {
      "main": [
        [
          {
            "node": "AI company researcher7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckCrimeThreshold": {
      "main": [
        [
          {
            "node": "AddCrimeDataFields",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "FormatCrimeData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FormatCrimeData": {
      "main": [
        [
          {
            "node": "UpdateCrimeFields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ReadAIVenueSheet2": {
      "main": [
        [
          {
            "node": "CheckVenueLinkNotEmpty",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MarkScreenedAddress": {
      "main": [
        [
          {
            "node": "UpdateAIVenueSheetError",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ReadBlacklistSheet1": {
      "main": [
        [
          {
            "node": "ReadBlacklistSheet2",
            "type": "main",
            "index": 0
          },
          {
            "node": "CombineBlacklistData",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ReadBlacklistSheet2": {
      "main": [
        [
          {
            "node": "CombineBlacklistData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ConvertBlacklistToFile": {
      "main": [
        [
          {
            "node": "ExtractBlacklistData",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ExtractBlacklistData": {
      "main": [
        [
          {
            "node": "ReadAIVenueSheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CombineBlacklistData": {
      "main": [
        [
          {
            "node": "ConvertBlacklistToFile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "UpdateAIVenueSheetInitial": {
      "main": [
        [
          {
            "node": "Avoid Get blank Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckVenueLinkNotEmpty": {
      "main": [
        [
          {
            "node": "Set Status for Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Avoid Get blank Link": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Status for Link": {
      "main": [
        [
          {
            "node": "UpdateAIVenueSheetInitial",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher": {
      "main": [
        [
          {
            "node": "AI company researcher1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher1": {
      "main": [
        [
          {
            "node": "AI company researcher8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher2": {
      "main": [
        [
          {
            "node": "AI company researcher2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RouteToResearcher3": {
      "main": [
        [
          {
            "node": "AI company researcher3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "KeyRotation": {
      "main": [
        [
          {
            "node": "RouteToResearcher1",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher2",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher3",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher5",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher4",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher8",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher6",
            "type": "main",
            "index": 0
          },
          {
            "node": "RouteToResearcher7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI company researcher8": {
      "main": [
        [
          {
            "node": "ParseAIOutputJSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model9": {
      "ai_languageModel": [
        [
          {
            "node": "AI company researcher8",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "2bd6ebea64a021fa193edc697a46050a9da715ddd5518b45ca7cd172f5dd729e"
  }
}